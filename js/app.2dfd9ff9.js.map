{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?0f16","webpack:///./src/assets/晶格.jpg","webpack:///./src/assets sync ^\\.\\/.*$","webpack:///./src/assets/黄渐变.jpeg","webpack:///./src/assets/粉蓝渐变.jpeg","webpack:///./src/App.vue?f541","webpack:///./src/util/ImageToolKit.js","webpack:///./src/util/ImageProcessor.js","webpack:///./src/util/MaskManager.js","webpack:///./src/util/smoothLineMarker.js","webpack:///./src/util/similarColorMarker.js","webpack:///src/App.vue","webpack:///./src/App.vue?3359","webpack:///./src/App.vue?2667","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/assets/绿渐变.jpeg","webpack:///./src/assets/logo.svg","webpack:///./src/assets/logo.png","webpack:///./src/assets/红渐变.jpeg"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","resolve","_vm","this","_h","$createElement","_c","_self","attrs","$vuetify","breakpoint","lgAndUp","model","callback","$$v","drawer","expression","staticClass","text","useDarkTheme","markerTypes","markerType","directives","rawName","similarColorMarkerThreshold","on","toggleAdvanceChangeBackground","_v","backgroundModeOptions","selectedBackgroundMode","advanceChangeBackground","pickedBackgroundColor","selectBackgroundImage","buildInBackgroundImagesPaths","selectedBuildInBackgroundImage","$event","stopPropagation","selectImage","isImageLoaded","style","display","isImageProcessed","height","imageHeight","advanceBackground","staticStyle","inputCanvasGroupMouseDownHandler","inputCanvasGroupMouseUpHandler","inputCanvasGroupMouseMoveHandler","inputCanvasGroupMouseLeaveHandler","preventDefault","inputCanvasGroupMouseWheelHandler","imageOut","background","colorHint","colorSelected","_s","estimatedTime","processImageAsync","gaussianFilterNoiseReductionCopy","addMarkedAreaMask","exceptMarkedAreaMask","intersectMarkedAreaMask","isImageProcessing","staticRenderFns","copyPixel","imageInData","imageOutData","row","col","originPixel","getPixel","setPixel","RgbaToHEX","rgba","toString","g","b","a","GetRgbaDistance","rgba0","rgba1","getPixelChannel","imageData","channel","width","setPixelChannel","addPixelNoClamp","pixel0","pixel1","clampTo254Copy","res","ImageData","origin","level","getWindowed","left","Math","max","right","min","up","down","pixelCount","sum","matrix","rows","cols","defaultValue","arr","Array","getMinAvaliableAlpha","referenceColr","color_channel","tmp","ImageToolKit","processPixel","imgFront_pixel_alpha","frontPixel","maskCanvas","canvas","ctx","getContext","fillColor","marked","initMask","clear","mask","rePaint","getImageData","console","log","putImageData","clearRect","paramMask","mergeMask","cell0","cell1","mergeFunction","mask0","mask1","error","setMask","x","y","Point","markCanvas","displayGuideLines","displayPoints","displayPointNumbers","points","clearCanvas","fillStyle","beginPath","arc","PI","fill","font","fillText","measureText","lineWidth","strokeStyle","moveTo","lineTo","closePath","stroke","xControl","yControl","xTarget","yTarget","quadraticCurveTo","pop","isPointInPath","isPointSelected","removeAllPoints","inputCanvas","markCtx","inputCtx","markImageData","inputImageData","boundaryColor","threshold","clearMarkCanvas","stack","getInputCanvasPixel","fillMatrix","entry","referrenceColor","currentPixel","distance","fillWithMatrix","keepFilled","setMarkCanvasPixel","flushBackMarkImageData","eraseMatrix","refreshInputImageData","refreshMarkImageData","seedFilling","fillRect","parseInt","fillArea","eraseWithMatrix","mounted","inputArea","document","getElementById","outputCanvas","smoothLineMarker","similarColorMarker","maskManager","watch","theme","isDark","newVal","computed","formatColor","colorRGB","selectedBackgroundImage","inputCanvasGroupTransformStyle","transform","marker","methods","reader","readAsDataURL","file","onload","importImageToInputCanvas","img","drawImage","src","imageDataUrl","estimateTime","getRealPosition","dragHelper","lastX","clientX","lastY","clientY","mousedown","mouseButton","button","mousedownTime","Date","addWayPoint","pickColor","popWayPoint","moveInputCanvasGroup","deltaY","scaleInputCanvasGroup","offsetX","offsetY","scaleFactor","deltaFactor","inLeftBound","inRightBound","inUpBound","inDownBound","translateX","deltaX","translateY","raw_colorRGB","addPoint","popPoint","orMask","collectMask","reset","andMask","exceptMask","copy","setTimeout","$nextTick","processWholeImage","ImageProcessor","toDataURL","processImageUnderMask","component","VApp","VAppBar","VAppBarNavIcon","VBtn","VCard","VCardActions","VCardText","VCardTitle","VColorPicker","VContainer","VDialog","VFileInput","VIcon","VList","VListItem","VMain","VNavigationDrawer","VProgressLinear","VRow","VSelect","VSlider","VSpacer","Vue","use","Vuetify","config","productionTip","vuetify","render","h","App","$mount"],"mappings":"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","file":"js/app.2dfd9ff9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/color-change-image/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","module.exports = __webpack_public_path__ + \"img/晶格.ba445b06.jpg\";","var map = {\n\t\"./logo.png\": \"cf05\",\n\t\"./logo.svg\": \"9b19\",\n\t\"./晶格.jpg\": \"11df\",\n\t\"./粉蓝渐变.jpeg\": \"31ae\",\n\t\"./红渐变.jpeg\": \"e306\",\n\t\"./绿渐变.jpeg\": \"62cc\",\n\t\"./黄渐变.jpeg\": \"250d\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"1771\";","module.exports = __webpack_public_path__ + \"img/黄渐变.7624b9cf.jpeg\";","module.exports = __webpack_public_path__ + \"img/粉蓝渐变.7a1a7abf.jpeg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',[_c('v-navigation-drawer',{attrs:{\"clipped\":_vm.$vuetify.breakpoint.lgAndUp,\"app\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('v-list',{attrs:{\"nav\":\"\"}},[_c('v-select',{staticClass:\"full-width\",attrs:{\"items\":[\n          { text: '浅色主题', value: false },\n          { text: '深色主题', value: true } ],\"single-line\":\"\"},model:{value:(_vm.useDarkTheme),callback:function ($$v) {_vm.useDarkTheme=$$v},expression:\"useDarkTheme\"}}),_c('v-select',{staticClass:\"full-width\",attrs:{\"items\":_vm.markerTypes,\"single-line\":\"\"},model:{value:(_vm.markerType),callback:function ($$v) {_vm.markerType=$$v},expression:\"markerType\"}}),_c('v-slider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.markerType == 'similarColorMarker'),expression:\"markerType == 'similarColorMarker'\"}],attrs:{\"value\":\"50\",\"max\":\"1000\",\"label\":\"阈值\"},model:{value:(_vm.similarColorMarkerThreshold),callback:function ($$v) {_vm.similarColorMarkerThreshold=$$v},expression:\"similarColorMarkerThreshold\"}}),_c('v-list-item',{on:{\"click\":_vm.toggleAdvanceChangeBackground}},[_vm._v(\"自定义背景\")]),_c('v-list-item',[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.advanceChangeBackground),expression:\"advanceChangeBackground\"}],staticClass:\"d-flex flex-column align-center full-width\"},[_c('v-select',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.advanceChangeBackground),expression:\"advanceChangeBackground\"}],staticClass:\"full-width\",attrs:{\"items\":_vm.backgroundModeOptions,\"single-line\":\"\"},model:{value:(_vm.selectedBackgroundMode),callback:function ($$v) {_vm.selectedBackgroundMode=$$v},expression:\"selectedBackgroundMode\"}}),_c('v-color-picker',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n              _vm.advanceChangeBackground && _vm.selectedBackgroundMode == '选择纯色'\n            ),expression:\"\\n              advanceChangeBackground && selectedBackgroundMode == '选择纯色'\\n            \"}],staticClass:\"margin-auto full-width\",model:{value:(_vm.pickedBackgroundColor),callback:function ($$v) {_vm.pickedBackgroundColor=$$v},expression:\"pickedBackgroundColor\"}}),_c('v-file-input',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n              _vm.advanceChangeBackground &&\n                _vm.selectedBackgroundMode == '本机背景图片'\n            ),expression:\"\\n              advanceChangeBackground &&\\n                selectedBackgroundMode == '本机背景图片'\\n            \"}],staticClass:\"full-width\",attrs:{\"accept\":\"image/*\",\"label\":\"选择背景图片图片\"},on:{\"change\":_vm.selectBackgroundImage}}),_c('v-select',{directives:[{name:\"show\",rawName:\"v-show\",value:(\n              _vm.advanceChangeBackground &&\n                _vm.selectedBackgroundMode == '内置背景图片'\n            ),expression:\"\\n              advanceChangeBackground &&\\n                selectedBackgroundMode == '内置背景图片'\\n            \"}],staticClass:\"full-width\",attrs:{\"items\":_vm.buildInBackgroundImagesPaths,\"default\":_vm.buildInBackgroundImagesPaths[0],\"item-text\":\"name\",\"item-value\":\"path\",\"single-line\":\"\"},model:{value:(_vm.selectedBuildInBackgroundImage),callback:function ($$v) {_vm.selectedBuildInBackgroundImage=$$v},expression:\"selectedBuildInBackgroundImage\"}})],1)])],1)],1),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":_vm.$vuetify.breakpoint.lgAndUp,\"color\":\"blue darken-3\",\"dark\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-file-input',{staticClass:\"full-width\",attrs:{\"accept\":\"image/*\",\"label\":\"选择待加工图片\"},on:{\"change\":_vm.selectImage}}),_c('v-spacer'),_c('v-btn',{attrs:{\"href\":\"https://github.com/Laurence-042/color-change-image\",\"target\":\"_blank\",\"text\":\"\"}},[_c('span',[_vm._v(\"在Github查看代码\")]),_c('v-icon',[_vm._v(\"mdi-open-in-new\")])],1)],1),_c('v-main',[_c('v-container',{staticClass:\"fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isImageLoaded),expression:\"!isImageLoaded\"}]},[_c('p',{staticClass:\"text-center text-h6\"},[_vm._v(\"请先在顶栏处选取图片\")]),_c('p',{staticClass:\"text-center\"},[_vm._v(\"使用方法：\")]),_c('ol',[_c('li',[_vm._v(\"点击顶栏上传图片\")]),_c('li',[_vm._v(\"通过点击在图片中选中将要成为变色图变色部分的颜色\")]),_c('li',[_vm._v(\" 在侧边栏中选择标记器（marker）进行标记，使用左键点击设置标记点，右键点击移除标记点（可选） \"),_c('ol',[_c('li',[_vm._v(\" 相似颜色标记器：选中与标记点相连通的，颜色差异小于阈值的区域 \")]),_c('li',[_vm._v(\" 曲线标记器：利用标记点圈出待处理区域的路径 \")])])]),_c('li',[_vm._v(\" 使用标记区操作蒙版（mask），进行加工时会将当前标记区加入蒙版后，将蒙版区域当作待加工区域（可选） \")]),_c('li',[_vm._v(\"点“开始加工”按钮\")]),_c('li',[_vm._v(\" 耐心等待加工完成，然后使用切换主题或者自定义背景色按钮来调整背景颜色预览变色图效果 \")]),_c('li',[_vm._v(\"提示：替换对比度较低且不过亮过暗的颜色效果会比较好\")]),_c('li',[_vm._v(\"提示：按住左键可以拖动图片，滚轮可以缩放图片\")])])]),_c('div',{staticClass:\"d-flex flex-column justify-center align-center full-width\",style:(_vm.isImageLoaded ? {} : { display: 'none !important' }),attrs:{\"id\":\"inputArea\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isImageProcessed),expression:\"!isImageProcessed\"}],staticClass:\"full-width canvas-group-wrapper center-background\",style:([{ height: _vm.imageHeight }, _vm.advanceBackground])},[_c('div',{staticStyle:{\"transform-origin\":\"0 0\"},style:(_vm.inputCanvasGroupTransformStyle)},[_c('canvas',{staticClass:\"full-width\",staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"top\":\"0\",\"z-index\":\"0\"},attrs:{\"id\":\"inputCanvas\"}}),_c('canvas',{staticClass:\"full-width\",staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"top\":\"0\",\"z-index\":\"1\"},attrs:{\"id\":\"maskCanvas\"}}),_c('canvas',{staticClass:\"full-width\",staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"top\":\"0\",\"z-index\":\"2\"},attrs:{\"id\":\"markCanvas\"},on:{\"mousedown\":_vm.inputCanvasGroupMouseDownHandler,\"mouseup\":_vm.inputCanvasGroupMouseUpHandler,\"mousemove\":_vm.inputCanvasGroupMouseMoveHandler,\"mouseleave\":_vm.inputCanvasGroupMouseLeaveHandler,\"mousewheel\":function($event){$event.preventDefault();return _vm.inputCanvasGroupMouseWheelHandler($event)},\"contextmenu\":function($event){$event.preventDefault();}}})])]),_c('img',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isImageProcessed),expression:\"isImageProcessed\"}],staticClass:\"full-width center-background\",style:([_vm.advanceBackground]),attrs:{\"src\":_vm.imageOut}}),(!_vm.isImageProcessed)?_c('v-card',{staticClass:\"fixed-right-bottom\",attrs:{\"dark\":\"\"}},[(_vm.colorSelected)?_c('v-card-title',{style:({ background: _vm.colorHint }),on:{\"click\":function($event){_vm.colorSelected = false}}},[_vm._v(\"已选择\"+_vm._s(_vm.colorHint)+\"，点击此处以重新选色\")]):_c('v-card-title',[_vm._v(\"请先在图中点击选择参考色\")]),_c('v-card-text',[_vm._v(\"加工过程预计需要大约\"+_vm._s(_vm.estimatedTime)+\"秒\")]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":_vm.processImageAsync}},[_vm._v(\"开始加工\")]),_c('v-btn',{on:{\"click\":_vm.gaussianFilterNoiseReductionCopy}},[_vm._v(\"降噪\")]),_c('v-btn',{on:{\"click\":_vm.addMarkedAreaMask}},[_vm._v(\"将选区加入蒙版\")]),_c('v-btn',{on:{\"click\":_vm.exceptMarkedAreaMask}},[_vm._v(\"从蒙版中减去选区\")]),_c('v-btn',{on:{\"click\":_vm.intersectMarkedAreaMask}},[_vm._v(\"将蒙版与选区相交\")])],1),_c('v-dialog',{attrs:{\"hide-overlay\":\"\",\"persistent\":\"\",\"width\":\"300\"},model:{value:(_vm.isImageProcessing),callback:function ($$v) {_vm.isImageProcessing=$$v},expression:\"isImageProcessing\"}},[_c('v-card',{attrs:{\"color\":\"primary\",\"dark\":\"\"}},[_c('v-card-text',[_c('p',[_vm._v(\"请稍等大约\"+_vm._s(_vm.estimatedTime)+\"秒\")]),_c('v-progress-linear',{staticClass:\"mb-0\",attrs:{\"indeterminate\":\"\",\"color\":\"white\"}})],1)],1)],1)],1):_c('v-card',{staticClass:\"fixed-right-bottom\",attrs:{\"dark\":\"\"}},[_c('v-card-title',[_vm._v(\"加工完成，标记模式已退出\")]),_c('v-card-text',[_vm._v(\" 使用右键点击图片另存为， \"),_c('br'),_vm._v(\"或者点击下方按钮撤销加工重新进入标记模式 \")]),_c('v-card-actions',[_c('v-btn',{on:{\"click\":function($event){_vm.isImageProcessed = false}}},[_vm._v(\"标记模式\")])],1)],1)],1),_c('canvas',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"full-width\",attrs:{\"id\":\"outputCanvas\"}})])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","let module={\r\n  copyPixel(imageInData, imageOutData, row, col) {\r\n      let originPixel =this.getPixel(imageInData,row,col);\r\n      this.setPixel(imageOutData,row,col,originPixel);\r\n  },\r\n  RgbaToHEX(rgba) {\r\n      return \"#\" + rgba.r.toString(16) + rgba.g.toString(16) + rgba.b.toString(16) + rgba.a.toString(16);\r\n  },\r\n\r\n  GetRgbaDistance(rgba0, rgba1) {\r\n      return (rgba0.r - rgba1.r) ** 2 + (rgba0.g - rgba1.g) ** 2 + (rgba0.b - rgba1.b) ** 2 + (rgba0.a - rgba1.a) ** 2;\r\n  },\r\n\r\n  getPixelChannel(imageData, row, col, channel) {\r\n      return imageData.data[row * (imageData.width * 4) + col * 4 + channel];\r\n  },\r\n\r\n  setPixelChannel(imageData, row, col, channel, value) {\r\n      imageData.data[row * (imageData.width * 4) + col * 4 + channel] = value;\r\n  },\r\n\r\n  getPixel(imageData, row, col) {\r\n      return {\r\n          r: this.getPixelChannel(imageData, row, col, 0),\r\n          g: this.getPixelChannel(imageData, row, col, 1),\r\n          b: this.getPixelChannel(imageData, row, col, 2),\r\n          a: this.getPixelChannel(imageData, row, col, 3)\r\n      }\r\n  },\r\n\r\n  setPixel(imageData, row, col, rgba) {\r\n      this.setPixelChannel(imageData, row, col, 0, rgba.r);\r\n      this.setPixelChannel(imageData, row, col, 1, rgba.g);\r\n      this.setPixelChannel(imageData, row, col, 2, rgba.b);\r\n      this.setPixelChannel(imageData, row, col, 3, rgba.a);\r\n  },\r\n\r\n  addPixelNoClamp(pixel0,pixel1){\r\n    return{\r\n      r:pixel0.r+pixel1.r,\r\n      g:pixel0.g+pixel1.g,\r\n      b:pixel0.b+pixel1.b,\r\n      a:pixel0.a+pixel1.a,\r\n    }\r\n  },\r\n\r\n  clampTo254Copy(imageData){\r\n    let res = new ImageData(imageData.width,imageData.height)\r\n\r\n    for(let i=0;i<imageData.width;i++){\r\n      for(let j=0;j<imageData.height;j++){\r\n        let origin = module.getPixel(imageData,j,i)\r\n        origin.r = origin.r==255?254:origin.r\r\n        origin.g = origin.g==255?254:origin.g\r\n        origin.b = origin.b==255?254:origin.b\r\n        this.setPixel(res,j,i,origin)\r\n      }\r\n    }\r\n\r\n    return res\r\n  },\r\n\r\n  gaussianFilterNoiseReductionCopy(imageData, level){\r\n    if(level==0){\r\n      return\r\n    }\r\n\r\n    function getWindowed(row,col){\r\n      let left = Math.max(0,col-level)\r\n      let right = Math.min(imageData.width-1,col+level)\r\n      let up = Math.max(0,row-level)\r\n      let down = Math.min(imageData.height-1,row+level)\r\n\r\n      let pixelCount = (right-left)*(down-up)\r\n\r\n      let sum = {r:0,g:0,b:0,a:0}\r\n\r\n      for(let i=left;i<right;i++){\r\n        for(let j=up;j<down;j++){\r\n          sum = module.addPixelNoClamp(sum,module.getPixel(imageData,j,i))\r\n        }\r\n      }\r\n\r\n      return {\r\n        r:sum.r/pixelCount,\r\n        g:sum.g/pixelCount,\r\n        b:sum.b/pixelCount,\r\n        a:sum.a/pixelCount\r\n      }\r\n    }\r\n\r\n    let res = new ImageData(imageData.width,imageData.height)\r\n    for(let i=0;i<imageData.width;i++){\r\n      for(let j=0;j<imageData.height;j++){\r\n        this.setPixel(res,j,i,getWindowed(j,i))\r\n      }\r\n    }\r\n    return res\r\n\r\n  },\r\n\r\n  matrix(rows, cols, defaultValue) {\r\n      var arr = [];\r\n      // Creates all lines:\r\n      for (var i = 0; i < rows; i++) {\r\n          // Creates an empty line\r\n          arr.push([]);\r\n          // Adds cols to the empty line:\r\n          arr[i].push(new Array(cols));\r\n          for (var j = 0; j < cols; j++) {\r\n              // Initializes:\r\n              arr[i][j] = defaultValue;\r\n          }\r\n      }\r\n      return arr;\r\n  }\r\n}\r\n\r\nexport default module","import ImageToolKit from \"./ImageToolKit\"\r\n\r\nexport default {\r\n    getMinAvaliableAlpha(imageInData, row, col, referenceColr) {\r\n        let res = 0;\r\n        for (let color_channel = 0; color_channel < 3; color_channel++) {\r\n            let tmp;\r\n            if (\r\n\r\n                ImageToolKit.getPixelChannel(imageInData, row, col, color_channel) >\r\n                referenceColr[color_channel]\r\n            ) {\r\n                tmp =\r\n                    ImageToolKit.getPixelChannel(imageInData, row, col, color_channel) -\r\n                    referenceColr[color_channel];\r\n                if (tmp != 0) {\r\n                    // when encounter 0 / 0, to get min available Alpha, assume tmp is 0\r\n                    tmp /= 255 - referenceColr[color_channel];\r\n                }\r\n            } else {\r\n                tmp =\r\n                    referenceColr[color_channel] -\r\n                    ImageToolKit.getPixelChannel(imageInData, row, col, color_channel);\r\n                if (tmp != 0) {\r\n                    tmp /= referenceColr[color_channel];\r\n                }\r\n            }\r\n            if (tmp > res) {\r\n                res = tmp;\r\n            }\r\n        }\r\n        return res;\r\n    },\r\n    processPixel(imageInData, imageOutData, row, col, referenceColr) {\r\n        // get min available imageOutData.Alpha\r\n        let imgFront_pixel_alpha = this.getMinAvaliableAlpha(imageInData, row, col, referenceColr);\r\n\r\n        ImageToolKit.setPixelChannel(imageOutData, row, col, 3, imgFront_pixel_alpha * 255);\r\n\r\n        if (imgFront_pixel_alpha == 0) {\r\n            for (let color_channel = 0; color_channel < 3; color_channel++) {\r\n                ImageToolKit.setPixelChannel(imageOutData, row, col, color_channel, 0);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // now imgFront_pixel_alpha is the min available alpha\r\n        for (let color_channel = 0; color_channel < 3; color_channel++) {\r\n            if (\r\n                ImageToolKit.getPixelChannel(imageInData, row, col, color_channel) >\r\n                referenceColr[color_channel]\r\n            ) {\r\n                let frontPixel =\r\n                    ImageToolKit.getPixelChannel(imageInData, row, col, color_channel) -\r\n                    referenceColr[color_channel];\r\n                frontPixel /= imgFront_pixel_alpha;\r\n                frontPixel += referenceColr[color_channel];\r\n\r\n                ImageToolKit.setPixelChannel(imageOutData, row, col, color_channel, frontPixel);\r\n            } else {\r\n                let frontPixel = referenceColr[color_channel];\r\n                let tmp =\r\n                    referenceColr[color_channel] -\r\n                    ImageToolKit.getPixelChannel(imageInData, row, col, color_channel);\r\n                tmp /= imgFront_pixel_alpha;\r\n                frontPixel -= tmp;\r\n\r\n                ImageToolKit.setPixelChannel(imageOutData, row, col, color_channel, frontPixel);\r\n            }\r\n        }\r\n    }\r\n}","import ImageToolKit from \"./ImageToolKit\"\r\n\r\nexport default class {\r\n    constructor(maskCanvas) {\r\n        this.canvas = maskCanvas;\r\n\r\n        this.ctx = maskCanvas.getContext('2d');\r\n\r\n        this.fillColor = { r: 0, g: 255, b: 0, a: 255 }\r\n\r\n        this.marked = false;\r\n\r\n        this.initMask()\r\n        this.clear();\r\n    }\r\n\r\n    initMask() {\r\n        this.mask = ImageToolKit.matrix(this.canvas.height, this.canvas.width, 0);\r\n        this.marked = false;\r\n    }\r\n\r\n    setMask(mask) {\r\n        this.mask = mask;\r\n        this.rePaint();\r\n    }\r\n\r\n    rePaint() {\r\n        this.clear();\r\n        let width = this.canvas.width, height = this.canvas.height;\r\n        let mask = this.mask;\r\n        let imageData = this.ctx.getImageData(0, 0, width, height);\r\n        console.log(\"重绘蒙版\")\r\n        for (let row = 0; row < height; row++) {\r\n            for (let col = 0; col < width; col++) {\r\n                if (mask[row][col] != 0) {\r\n                    ImageToolKit.setPixel(imageData, row, col, this.fillColor)\r\n                }\r\n            }\r\n        }\r\n        this.ctx.putImageData(imageData, 0, 0);\r\n    }\r\n\r\n    clear() {\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n    }\r\n\r\n    orMask(paramMask) {\r\n        this.mergeMask(paramMask, (cell0, cell1) => { return (cell0 == 1 || cell1 == 1) ? 1 : 0 });\r\n    }\r\n    andMask(paramMask) {\r\n        this.mergeMask(paramMask, (cell0, cell1) => { return (cell0 == 1 && cell1 == 1) ? 1 : 0 });\r\n    }\r\n    exceptMask(paramMask) {\r\n        this.mergeMask(paramMask, (cell0, cell1) => { return (cell1 == 1) ? 0 : cell0 });\r\n    }\r\n\r\n    mergeMask(paramMask, mergeFunction) {\r\n        let mask0 = this.mask;\r\n        let mask1 = paramMask;\r\n        if (mask0.length == 0 || mask1.length == 0) {\r\n            console.error(\"用于合并的矩阵不应为空\");\r\n            return null;\r\n        }\r\n        if (mask0[0].length == 0 || mask1[0].length == 0) {\r\n            console.error(\"用于合并的矩阵应该至少有一列\");\r\n            return null;\r\n        }\r\n        if (mask0[0].length != mask1[0].length || mask0.length != mask1.length) {\r\n            console.error(\"用于合并的矩阵行列数应该完全相同\");\r\n            return null;\r\n        }\r\n        console.log(\"开始合并\");\r\n        this.marked = false;\r\n        let height = mask0.length;\r\n        let width = mask0[0].length;\r\n        let res = ImageToolKit.matrix(height, width);\r\n        for (let row = 0; row < height; row++) {\r\n            for (let col = 0; col < width; col++) {\r\n                res[row][col] = mergeFunction(mask0[row][col], mask1[row][col]);\r\n                if (!this.marked && res[row][col] != 0) {\r\n                    this.marked = true;\r\n                }\r\n            }\r\n        }\r\n        return this.setMask(res);\r\n    }\r\n\r\n    isPointSelected(x, y) {\r\n        let row = y;\r\n        let col = x;\r\n        return this.mask[row][col] != 0;\r\n    }\r\n\r\n    isMarked() {\r\n        return this.marked;\r\n    }\r\n}","import ImageToolKit from \"./ImageToolKit\";\r\n\r\nclass Point {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\n\r\nexport default class {\r\n    constructor(markCanvas) {\r\n        this.markCanvas = markCanvas;\r\n        this.ctx = markCanvas.getContext('2d');\r\n        this.displayGuideLines = true;\r\n        this.displayPoints = true;\r\n        this.displayPointNumbers = false;\r\n        this.points = [];\r\n        this.clearCanvas();\r\n    }\r\n\r\n    rePaint() {\r\n        let points = this.points;\r\n\r\n        this.clearCanvas();\r\n\r\n        // 标记点\r\n        if (this.displayPoints) {\r\n\r\n            this.ctx.fillStyle = '#e88';\r\n            for (let i = 0; i < points.length; ++i) {\r\n\r\n                this.ctx.beginPath();\r\n                this.ctx.arc(points[i].x, points[i].y, 2, 0, Math.PI * 2);\r\n                this.ctx.fill();\r\n\r\n                // 标记点序号\r\n                if (this.displayPointNumbers) {\r\n\r\n                    this.ctx.font = '7px Verdana';\r\n                    this.ctx.fillText(i, points[i].x - this.ctx.measureText(i).width / 2, points[i].y + 18);\r\n                }\r\n            }\r\n        }\r\n\r\n        if (points.length < 1) {\r\n            return;\r\n        }\r\n        // 依次途径标记点的引导线（折线）\r\n        if (this.displayGuideLines) {\r\n\r\n            this.ctx.beginPath();\r\n            this.ctx.lineWidth = .6;\r\n            this.ctx.strokeStyle = '#111';\r\n\r\n            this.ctx.moveTo(points[0].x, points[0].y);\r\n\r\n            for (let i = 1; i < points.length; ++i)\r\n                this.ctx.lineTo(points[i].x, points[i].y);\r\n            this.ctx.closePath();\r\n\r\n            this.ctx.stroke();\r\n        }\r\n\r\n        if (points.length < 2) {\r\n            return;\r\n        }\r\n        // 平滑曲线\r\n        this.ctx.lineWidth = 2;\r\n        this.ctx.strokeStyle = '#eee';\r\n        let xControl = points[1].x,\r\n            yControl = points[1].y;\r\n\r\n        // 连接第一个点与前两个点的中点，并将中点作为曲线的起点\r\n        this.ctx.beginPath();\r\n        this.ctx.moveTo(points[0].x, points[0].y);\r\n        this.ctx.lineTo((points[0].x + points[1].x) / 2, (points[0].y + points[1].y) / 2);\r\n\r\n        // 总是以前一个点为控制点，以当前点与控制点的中间为终点\r\n        for (let i = 2; i < points.length; ++i) {\r\n            let x = points[i].x,\r\n                y = points[i].y,\r\n\r\n                xTarget = (xControl + x) / 2,\r\n                yTarget = (yControl + y) / 2;\r\n\r\n            this.ctx.quadraticCurveTo(xControl, yControl, xTarget, yTarget);\r\n\r\n            xControl = x;\r\n            yControl = y;\r\n\r\n        }\r\n\r\n        this.ctx.lineTo(xControl, yControl);\r\n        this.ctx.closePath();\r\n\r\n        this.ctx.stroke();\r\n    }\r\n\r\n    clearCanvas() {\r\n        this.ctx.clearRect(0, 0, this.markCanvas.width, this.markCanvas.height);\r\n    }\r\n\r\n    removeAllPoints() {\r\n        this.points.length = 0;\r\n        this.clearCanvas();\r\n        this.rePaint();\r\n    }\r\n\r\n    addPoint(x, y) {\r\n        this.points.push(new Point(x, y));\r\n        this.rePaint();\r\n    }\r\n\r\n    popPoint() {\r\n        if (this.points.length > 0) {\r\n            this.points.pop();\r\n            this.rePaint();\r\n        } else this.clearCanvas();\r\n    }\r\n\r\n    shiftPoint() {\r\n        if (this.points.length > 0) {\r\n            this.points.shift();\r\n            this.rePaint();\r\n        } else this.clearCanvas();\r\n    }\r\n\r\n    isPointSelected(x, y) {\r\n        return this.ctx.isPointInPath(x, y);\r\n    }\r\n\r\n    isMarked() {\r\n        return this.points.length != 0;\r\n    }\r\n\r\n    collectMask() {\r\n        let width = this.markCanvas.width;\r\n        let height = this.markCanvas.height;\r\n        let mask = ImageToolKit.matrix(height, width, 0);\r\n        \r\n        for (let row = 0; row < height; row++) {\r\n            for (let col = 0; col < width; col++) {\r\n                mask[row][col] = this.isPointSelected(col, row) ? 1 : 0;\r\n            }\r\n        }\r\n        return mask;\r\n    }\r\n\r\n    reset(){\r\n        this.removeAllPoints();\r\n    }\r\n}","import ImageToolKit from \"./ImageToolKit\";\r\n\r\nexport default class {\r\n    constructor(markCanvas, inputCanvas) {\r\n        this.markCanvas = markCanvas;\r\n        this.inputCanvas = inputCanvas;\r\n\r\n        this.markCtx = markCanvas.getContext('2d');\r\n        this.inputCtx = inputCanvas.getContext('2d');\r\n\r\n        this.markImageData = this.markCtx.getImageData(0, 0, this.markCanvas.width, this.markCanvas.height);\r\n        this.inputImageData = this.inputCtx.getImageData(0, 0, this.inputCanvas.width, this.inputCanvas.height);\r\n\r\n        /**\r\n         * 当前版本约定：fillColor的alpha通道必为正数，boundaryColor的alpha通道必为0\r\n         */\r\n        this.fillColor = { r: 0, g: 255, b: 0, a: 127 }\r\n        this.boundaryColor = { r: 0, g: 0, b: 0, a: 0 }\r\n        this.threshold = 300\r\n\r\n        this.points = [];\r\n        this.clearMarkCanvas();\r\n    }\r\n\r\n    refreshMarkImageData() {\r\n        this.markImageData = this.markCtx.getImageData(0, 0, this.markCanvas.width, this.markCanvas.height);\r\n    }\r\n\r\n    refreshInputImageData() {\r\n        this.inputImageData = this.inputCtx.getImageData(0, 0, this.inputCanvas.width, this.inputCanvas.height);\r\n    }\r\n\r\n    flushBackMarkImageData() {\r\n        this.markCtx.putImageData(this.markImageData, 0, 0);\r\n    }\r\n\r\n    getInputCanvasPixel(row, col) {\r\n        return ImageToolKit.getPixel(this.inputImageData, row, col);\r\n    }\r\n\r\n    setMarkCanvasPixel(row, col, rgba) {\r\n        ImageToolKit.setPixel(this.markImageData, row, col, rgba);\r\n    }\r\n\r\n    seedFilling(x, y) {\r\n        let row = y;\r\n        let col = x;\r\n        let stack = [[row, col, this.getInputCanvasPixel(row, col)]];\r\n        let fillMatrix = ImageToolKit.matrix(this.inputCanvas.height, this.inputCanvas.width, 0);\r\n        while (stack.length != 0) {\r\n            let entry = stack.pop();\r\n            row = entry[0];\r\n            col = entry[1];\r\n            let referrenceColor = entry[2];\r\n\r\n            if (fillMatrix[row][col] >= 2) {\r\n                continue;\r\n            }\r\n\r\n            let currentPixel = this.getInputCanvasPixel(row, col);\r\n            let distance = ImageToolKit.GetRgbaDistance(currentPixel, referrenceColor);\r\n            // console.log(RgbaToHEX(currentPixel), RgbaToHEX(referrenceColor), distance)\r\n            if (distance < this.threshold) {\r\n\r\n                // if (row < this.inputCanvas.height - 1)\r\n                //     stack.push([row + 1, col, referrenceColor])\r\n                // if (row > 0)\r\n                //     stack.push([row - 1, col, referrenceColor])\r\n                // if (col < this.inputCanvas.width - 1)\r\n                //     stack.push([row, col + 1, referrenceColor])\r\n                // if (col > 0)\r\n                //     stack.push([row, col - 1, referrenceColor])\r\n\r\n                if (row < this.inputCanvas.height - 1)\r\n                    stack.push([row + 1, col, currentPixel])\r\n                if (row > 0)\r\n                    stack.push([row - 1, col, currentPixel])\r\n                if (col < this.inputCanvas.width - 1)\r\n                    stack.push([row, col + 1, currentPixel])\r\n                if (col > 0)\r\n                    stack.push([row, col - 1, currentPixel])\r\n                \r\n                // normal fill\r\n                fillMatrix[row][col] = 4;\r\n            }else{\r\n                // adjacent to at least one filled pixel\r\n                fillMatrix[row][col] ++;\r\n            }\r\n            \r\n        }\r\n\r\n        this.fillWithMatrix(fillMatrix);\r\n        return fillMatrix;\r\n    }\r\n\r\n    fillWithMatrix(fillMatrix,keepFilled=true){\r\n        for (let row = 0; row < this.inputCanvas.height; row++) {\r\n            for (let col = 0; col < this.inputCanvas.width; col++) {\r\n                if(fillMatrix[row][col]==0){\r\n                    if(!keepFilled){\r\n                        this.setMarkCanvasPixel(row, col, this.boundaryColor);\r\n                    }\r\n                }else{\r\n                    this.setMarkCanvasPixel(row, col, this.fillColor);\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.flushBackMarkImageData();\r\n    }\r\n\r\n    eraseWithMatrix(eraseMatrix){\r\n        for (let row = 0; row < this.inputCanvas.height; row++) {\r\n            for (let col = 0; col < this.inputCanvas.width; col++) {\r\n                if(eraseMatrix[row][col]==0){\r\n                    continue;\r\n                }else{\r\n                    this.setMarkCanvasPixel(row, col, this.boundaryColor);\r\n                }\r\n            }\r\n        }\r\n        \r\n        this.flushBackMarkImageData();\r\n    }\r\n\r\n    fillArea(x, y) {\r\n        this.refreshInputImageData();\r\n        this.refreshMarkImageData();\r\n        // console.log(this.inputImageData)\r\n        // console.log(y * (this.inputImageData.width * 4) + x * 4)\r\n        let res = this.seedFilling(x, y, this.fillColor);\r\n        // console.log(this.markImageData)\r\n        \r\n        return res;\r\n    }\r\n\r\n    clearArea(x, y) {\r\n        this.refreshInputImageData();\r\n        this.refreshMarkImageData();\r\n        this.seedFilling(x, y, this.boundaryColor);\r\n        this.flushBackMarkImageData();\r\n    }\r\n\r\n    clearMarkCanvas() {\r\n        this.markCtx.fillStyle = ImageToolKit.RgbaToHEX(this.boundaryColor);\r\n        this.markCtx.clearRect(0, 0, this.markCanvas.width, this.markCanvas.height);\r\n        this.markCtx.fillRect(0, 0, this.markCanvas.width, this.markCanvas.height);\r\n    }\r\n\r\n    removeAllPoints() {\r\n        this.points.length = 0;\r\n        this.clearMarkCanvas();\r\n    }\r\n\r\n    addPoint(x, y) {\r\n        x = parseInt(x);\r\n        y = parseInt(y);\r\n        let fillMatrix = this.fillArea(x, y)\r\n        this.points.push(fillMatrix);\r\n        if(this.points.length>3){\r\n            this.points=this.points.slice(1)\r\n        }\r\n    }\r\n\r\n    popPoint() {\r\n        if (this.points.length > 0) {\r\n            this.eraseWithMatrix(this.points.pop());\r\n        } else this.clearMarkCanvas();\r\n    }\r\n\r\n    isPointSelected(x, y) {\r\n        let row = y;\r\n        let col = x;\r\n        return this.markImageData.data[row * (this.markImageData.width * 4) + col * 4 + 3] != 0;\r\n    }\r\n\r\n    isMarked() {\r\n        return this.points.length != 0;\r\n    }\r\n\r\n    collectMask() {\r\n        this.refreshMarkImageData();\r\n        let width = this.markCanvas.width;\r\n        let height = this.markCanvas.height;\r\n        let mask = ImageToolKit.matrix(height, width, 0);\r\n\r\n        for (let row = 0; row < height; row++) {\r\n            for (let col = 0; col < width; col++) {\r\n                mask[row][col] = this.isPointSelected(col, row) ? 1 : 0;\r\n            }\r\n        }\r\n        return mask;\r\n    }\r\n\r\n    reset() {\r\n        this.removeAllPoints();\r\n    }\r\n}","<template>\r\n  <v-app>\r\n    <v-navigation-drawer\r\n      v-model=\"drawer\"\r\n      :clipped=\"$vuetify.breakpoint.lgAndUp\"\r\n      app\r\n    >\r\n      <v-list nav>\r\n        <!-- 切换主题（简单背景调整） -->\r\n        <v-select\r\n          v-model=\"useDarkTheme\"\r\n          :items=\"[\r\n            { text: '浅色主题', value: false },\r\n            { text: '深色主题', value: true },\r\n          ]\"\r\n          single-line\r\n          class=\"full-width\"\r\n        ></v-select>\r\n\r\n        <v-select\r\n          v-model=\"markerType\"\r\n          :items=\"markerTypes\"\r\n          single-line\r\n          class=\"full-width\"\r\n        ></v-select>\r\n\r\n        <v-slider\r\n          v-model=\"similarColorMarkerThreshold\"\r\n          v-show=\"markerType == 'similarColorMarker'\"\r\n          value=\"50\"\r\n          max=\"1000\"\r\n          label=\"阈值\"\r\n        ></v-slider>\r\n\r\n        <!-- 高级背景调整 -->\r\n        <v-list-item @click=\"toggleAdvanceChangeBackground\"\r\n          >自定义背景</v-list-item\r\n        >\r\n        <v-list-item>\r\n          <div\r\n            v-show=\"advanceChangeBackground\"\r\n            class=\"d-flex flex-column align-center full-width\"\r\n          >\r\n            <v-select\r\n              v-show=\"advanceChangeBackground\"\r\n              v-model=\"selectedBackgroundMode\"\r\n              :items=\"backgroundModeOptions\"\r\n              single-line\r\n              class=\"full-width\"\r\n            ></v-select>\r\n\r\n            <v-color-picker\r\n              v-show=\"\r\n                advanceChangeBackground && selectedBackgroundMode == '选择纯色'\r\n              \"\r\n              v-model=\"pickedBackgroundColor\"\r\n              class=\"margin-auto full-width\"\r\n            ></v-color-picker>\r\n            <v-file-input\r\n              v-show=\"\r\n                advanceChangeBackground &&\r\n                  selectedBackgroundMode == '本机背景图片'\r\n              \"\r\n              accept=\"image/*\"\r\n              label=\"选择背景图片图片\"\r\n              @change=\"selectBackgroundImage\"\r\n              class=\"full-width\"\r\n            ></v-file-input>\r\n            <v-select\r\n              v-show=\"\r\n                advanceChangeBackground &&\r\n                  selectedBackgroundMode == '内置背景图片'\r\n              \"\r\n              v-model=\"selectedBuildInBackgroundImage\"\r\n              :items=\"buildInBackgroundImagesPaths\"\r\n              :default=\"buildInBackgroundImagesPaths[0]\"\r\n              item-text=\"name\"\r\n              item-value=\"path\"\r\n              single-line\r\n              class=\"full-width\"\r\n            ></v-select>\r\n          </div>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-navigation-drawer>\r\n\r\n    <v-app-bar\r\n      app\r\n      :clipped-left=\"$vuetify.breakpoint.lgAndUp\"\r\n      color=\"blue darken-3\"\r\n      dark\r\n    >\r\n      <v-app-bar-nav-icon @click.stop=\"drawer = !drawer\"></v-app-bar-nav-icon>\r\n\r\n      <v-file-input\r\n        class=\"full-width\"\r\n        accept=\"image/*\"\r\n        label=\"选择待加工图片\"\r\n        @change=\"selectImage\"\r\n      ></v-file-input>\r\n\r\n      <v-spacer></v-spacer>\r\n\r\n      <v-btn\r\n        href=\"https://github.com/Laurence-042/color-change-image\"\r\n        target=\"_blank\"\r\n        text\r\n      >\r\n        <span>在Github查看代码</span>\r\n        <v-icon>mdi-open-in-new</v-icon>\r\n      </v-btn>\r\n    </v-app-bar>\r\n    <v-main>\r\n      <v-container class=\"fill-height\" fluid>\r\n        <v-row align=\"center\" justify=\"center\">\r\n          <!-- 操作提示 -->\r\n          <div v-show=\"!isImageLoaded\">\r\n            <p class=\"text-center text-h6\">请先在顶栏处选取图片</p>\r\n            <p class=\"text-center\">使用方法：</p>\r\n            <ol>\r\n              <li>点击顶栏上传图片</li>\r\n              <li>通过点击在图片中选中将要成为变色图变色部分的颜色</li>\r\n              <li>\r\n                在侧边栏中选择标记器（marker）进行标记，使用左键点击设置标记点，右键点击移除标记点（可选）\r\n                <ol>\r\n                  <li>\r\n                    相似颜色标记器：选中与标记点相连通的，颜色差异小于阈值的区域\r\n                  </li>\r\n                  <li>\r\n                    曲线标记器：利用标记点圈出待处理区域的路径\r\n                  </li>\r\n                </ol>\r\n              </li>\r\n              <li>\r\n                使用标记区操作蒙版（mask），进行加工时会将当前标记区加入蒙版后，将蒙版区域当作待加工区域（可选）\r\n              </li>\r\n              <li>点“开始加工”按钮</li>\r\n              <li>\r\n                耐心等待加工完成，然后使用切换主题或者自定义背景色按钮来调整背景颜色预览变色图效果\r\n              </li>\r\n              <li>提示：替换对比度较低且不过亮过暗的颜色效果会比较好</li>\r\n              <li>提示：按住左键可以拖动图片，滚轮可以缩放图片</li>\r\n            </ol>\r\n          </div>\r\n\r\n          <!-- 输入区 -->\r\n          <div\r\n            id=\"inputArea\"\r\n            class=\"d-flex flex-column justify-center align-center full-width\"\r\n            :style=\"isImageLoaded ? {} : { display: 'none !important' }\"\r\n          >\r\n            <!-- 输入图层组遮罩 -->\r\n            <div\r\n              v-show=\"!isImageProcessed\"\r\n              class=\"full-width canvas-group-wrapper center-background\"\r\n              :style=\"[{ height: imageHeight }, advanceBackground]\"\r\n            >\r\n              <!-- 输入图层组 -->\r\n              <div\r\n                style=\"transform-origin: 0 0;\"\r\n                :style=\"inputCanvasGroupTransformStyle\"\r\n              >\r\n                <!-- 输入图片，不应修改此图片 -->\r\n                <canvas\r\n                  class=\"full-width\"\r\n                  style=\"position: absolute; left: 0; top: 0; z-index: 0;\"\r\n                  id=\"inputCanvas\"\r\n                ></canvas>\r\n                <!-- 蒙版图层 -->\r\n                <canvas\r\n                  class=\"full-width\"\r\n                  style=\"position: absolute; left: 0; top: 0; z-index: 1;\"\r\n                  id=\"maskCanvas\"\r\n                ></canvas>\r\n                <!-- 标记路径，使用标记方式指定区域进行加工时，标记显示在本图层-->\r\n                <canvas\r\n                  class=\"full-width\"\r\n                  style=\"position: absolute; left: 0; top: 0; z-index: 2;\"\r\n                  id=\"markCanvas\"\r\n                  @mousedown=\"inputCanvasGroupMouseDownHandler\"\r\n                  @mouseup=\"inputCanvasGroupMouseUpHandler\"\r\n                  @mousemove=\"inputCanvasGroupMouseMoveHandler\"\r\n                  @mouseleave=\"inputCanvasGroupMouseLeaveHandler\"\r\n                  @mousewheel.prevent=\"inputCanvasGroupMouseWheelHandler\"\r\n                  @contextmenu.prevent\r\n                ></canvas>\r\n              </div>\r\n            </div>\r\n\r\n            <!-- 输出图片img -->\r\n            <img\r\n              v-show=\"isImageProcessed\"\r\n              :src=\"imageOut\"\r\n              :style=\"[advanceBackground]\"\r\n              class=\"full-width center-background\"\r\n            />\r\n\r\n            <!-- 操作区 -->\r\n            <v-card v-if=\"!isImageProcessed\" class=\"fixed-right-bottom\" dark>\r\n              <v-card-title\r\n                v-if=\"colorSelected\"\r\n                :style=\"{ background: colorHint }\"\r\n                @click=\"colorSelected = false\"\r\n                >已选择{{ colorHint }}，点击此处以重新选色</v-card-title\r\n              >\r\n              <v-card-title v-else>请先在图中点击选择参考色</v-card-title>\r\n              <v-card-text\r\n                >加工过程预计需要大约{{ estimatedTime }}秒</v-card-text\r\n              >\r\n\r\n              <v-card-actions>\r\n                <v-btn @click=\"processImageAsync\">开始加工</v-btn>\r\n                <v-btn @click=\"gaussianFilterNoiseReductionCopy\">降噪</v-btn>\r\n                <v-btn @click=\"addMarkedAreaMask\">将选区加入蒙版</v-btn>\r\n                <v-btn @click=\"exceptMarkedAreaMask\">从蒙版中减去选区</v-btn>\r\n                <v-btn @click=\"intersectMarkedAreaMask\">将蒙版与选区相交</v-btn>\r\n              </v-card-actions>\r\n\r\n              <v-dialog\r\n                v-model=\"isImageProcessing\"\r\n                hide-overlay\r\n                persistent\r\n                width=\"300\"\r\n              >\r\n                <v-card color=\"primary\" dark>\r\n                  <v-card-text>\r\n                    <p>请稍等大约{{ estimatedTime }}秒</p>\r\n                    <v-progress-linear\r\n                      indeterminate\r\n                      color=\"white\"\r\n                      class=\"mb-0\"\r\n                    ></v-progress-linear>\r\n                  </v-card-text>\r\n                </v-card>\r\n              </v-dialog>\r\n            </v-card>\r\n\r\n            <v-card v-else class=\"fixed-right-bottom\" dark>\r\n              <v-card-title>加工完成，标记模式已退出</v-card-title>\r\n              <v-card-text>\r\n                使用右键点击图片另存为，\r\n                <br />或者点击下方按钮撤销加工重新进入标记模式\r\n              </v-card-text>\r\n\r\n              <v-card-actions>\r\n                <v-btn @click=\"isImageProcessed = false\">标记模式</v-btn>\r\n              </v-card-actions>\r\n            </v-card>\r\n          </div>\r\n\r\n          <!-- 输出图片画布 -->\r\n          <canvas v-show=\"false\" class=\"full-width\" id=\"outputCanvas\"></canvas>\r\n        </v-row>\r\n      </v-container>\r\n    </v-main>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport ImageProcessor from './util/ImageProcessor'\r\nimport ImageToolKit from './util/ImageToolKit'\r\nimport MaskManager from './util/MaskManager'\r\nimport SmoothLineMarker from './util/smoothLineMarker'\r\nimport SimilarColorMarker from './util/similarColorMarker'\r\n\r\nexport default {\r\n  name: 'App',\r\n  data: () => ({\r\n    /**导航抽屉 */\r\n    drawer: null,\r\n\r\n    /**待处理图片是否已加载 */\r\n    isImageLoaded: false,\r\n    /**待处理图片是否正在处理 */\r\n    isImageProcessing: false,\r\n    /**待处理图片是否已处理完成 */\r\n    isImageProcessed: false,\r\n    /**待处理图片 */\r\n    imageIn: null,\r\n    /**处理后图片 */\r\n    imageOut: null,\r\n\r\n    /**选中的参考颜色 */\r\n    colorRGB: { r: 122, g: 122, b: 122 },\r\n    colorSelected: false,\r\n    estimatedTime: 0,\r\n\r\n    useDarkTheme: false,\r\n\r\n    advanceChangeBackground: false,\r\n    backgroundModeOptions: ['选择纯色', '内置背景图片', '本机背景图片'],\r\n    selectedBackgroundMode: '选择纯色',\r\n    pickedBackgroundColor: { r: 255, g: 255, b: 255 },\r\n    selectedBackgroundImage: null,\r\n    buildInBackgroundImagesPaths: [\r\n      { name: 'logo', path: 'logo.png' },\r\n      { name: '粉蓝渐变', path: '粉蓝渐变.jpeg' },\r\n      { name: '红渐变', path: '红渐变.jpeg' },\r\n      { name: '黄渐变', path: '黄渐变.jpeg' },\r\n      { name: '绿渐变', path: '绿渐变.jpeg' },\r\n      { name: '晶格', path: '晶格.jpg' },\r\n    ],\r\n    selectedBuildInBackgroundImage: 'logo.png',\r\n\r\n    imageHeight: '0px',\r\n\r\n    /**输入区 */\r\n    inputArea: null,\r\n    /**输入画布 */\r\n    inputCanvas: null,\r\n    /**蒙版画布 */\r\n    maskCanvas: null,\r\n    /**标记画布 */\r\n    markCanvas: null,\r\n    /**输出画布 */\r\n    outputCanvas: null,\r\n\r\n    /**蒙版管理器 */\r\n    maskManager: null,\r\n\r\n    /**标记器 */\r\n    markerTypes: ['similarColorMarker', 'smoothLineMarker'],\r\n    markerType: 'similarColorMarker',\r\n    smoothLineMarker: null,\r\n    similarColorMarker: null,\r\n    similarColorMarkerThreshold: 300,\r\n\r\n    /**缩放比例 */\r\n    scaleFactor: 1,\r\n    /**X轴平移 */\r\n    translateX: 0,\r\n    /**Y轴平移 */\r\n    translateY: 0,\r\n    /**拖动辅助数据，存储拖动状态 */\r\n    dragHelper: {\r\n      lastX: 0,\r\n      lastY: 0,\r\n      mousedown: false,\r\n      mouseButton: 0,\r\n      mousedownTime: new Date(),\r\n    },\r\n  }),\r\n  mounted() {\r\n    this.inputArea = document.getElementById('inputArea')\r\n    this.inputCanvas = document.getElementById('inputCanvas')\r\n    this.maskCanvas = document.getElementById('maskCanvas')\r\n    this.markCanvas = document.getElementById('markCanvas')\r\n    this.outputCanvas = document.getElementById('outputCanvas')\r\n    this.smoothLineMarker = new SmoothLineMarker(this.markCanvas)\r\n    this.similarColorMarker = new SimilarColorMarker(\r\n      this.markCanvas,\r\n      this.inputCanvas\r\n    )\r\n    this.maskManager = new MaskManager(this.maskCanvas)\r\n  },\r\n  watch: {\r\n    /**切换主题 */\r\n    useDarkTheme() {\r\n      this.advanceChangeBackground = false\r\n      this.$vuetify.theme.isDark = this.useDarkTheme\r\n    },\r\n    similarColorMarkerThreshold(newVal) {\r\n      this.similarColorMarker.threshold = newVal\r\n    },\r\n  },\r\n  computed: {\r\n    /**返回当前选中的颜色格式化的结果 */\r\n    colorHint() {\r\n      return this.formatColor(this.colorRGB)\r\n    },\r\n    /**使用非默认主题时返回相应的输出画布背景 */\r\n    advanceBackground() {\r\n      if (!this.advanceChangeBackground) {\r\n        return {}\r\n      }\r\n      switch (this.selectedBackgroundMode) {\r\n        case '选择纯色':\r\n          return {\r\n            'background-color': this.formatColor(this.pickedBackgroundColor),\r\n          }\r\n        case '内置背景图片':\r\n          return {\r\n            'background-image':\r\n              'url(' +\r\n              require('@/assets/' + this.selectedBuildInBackgroundImage) +\r\n              ')',\r\n            'background-size': 'cover',\r\n          }\r\n        case '本机背景图片':\r\n          return {\r\n            'background-image': 'url(' + this.selectedBackgroundImage + ')',\r\n            'background-size': 'cover',\r\n          }\r\n      }\r\n      return {}\r\n    },\r\n    inputCanvasGroupTransformStyle() {\r\n      return {\r\n        transform:\r\n          'translate(' +\r\n          this.translateX +\r\n          'px,' +\r\n          this.translateY +\r\n          'px) scale(' +\r\n          this.scaleFactor +\r\n          ')',\r\n      }\r\n    },\r\n    marker() {\r\n      switch (this.markerType) {\r\n        case 'smoothLineMarker':\r\n          return this.smoothLineMarker\r\n        case 'similarColorMarker':\r\n          return this.similarColorMarker\r\n      }\r\n      return null\r\n    },\r\n  },\r\n  methods: {\r\n    /**选取本机图片作为输入 */\r\n    selectImage(file) {\r\n      let reader = new FileReader()\r\n      reader.readAsDataURL(file)\r\n      reader.onload = (e) => {\r\n        let image = e.target.result\r\n        console.log('image readed')\r\n        this.scaleFactor = 1\r\n        this.translateX = 0\r\n        this.translateY = 0\r\n\r\n        this.importImageToInputCanvas(image)\r\n\r\n        this.imageIn = image\r\n        this.isImageLoaded = true\r\n      }\r\n    },\r\n    /**选取本机图片作为输出图片的背景 */\r\n    selectBackgroundImage(file) {\r\n      let reader = new FileReader()\r\n      reader.readAsDataURL(file)\r\n      reader.onload = (e) => {\r\n        this.selectedBackgroundImage = e.target.result\r\n      }\r\n    },\r\n    /**将图像绘制在指定canvas上，设置canvas尺寸，设置包裹canvas的父元素div的高度，估计 */\r\n    importImageToInputCanvas(imageDataUrl) {\r\n      let inputCanvas = this.inputCanvas\r\n      let maskCanvas = this.maskCanvas\r\n      let markCanvas = this.markCanvas\r\n\r\n      let ctx = inputCanvas.getContext('2d')\r\n      let img = new Image()\r\n      img.onload = () => {\r\n        console.log('image loaded')\r\n        inputCanvas.width = img.width\r\n        inputCanvas.height = img.height\r\n        maskCanvas.width = img.width\r\n        maskCanvas.height = img.height\r\n        markCanvas.width = img.width\r\n        markCanvas.height = img.height\r\n\r\n        this.marker.removeAllPoints()\r\n        this.maskManager.initMask()\r\n\r\n        ctx.drawImage(img, 0, 0)\r\n\r\n        let initialScale = this.inputArea.offsetWidth / inputCanvas.width\r\n        this.imageHeight = inputCanvas.height * initialScale + 'px'\r\n        this.estimateTime()\r\n      }\r\n      img.src = imageDataUrl\r\n    },\r\n    estimateTime() {\r\n      this.estimatedTime =\r\n        (this.inputCanvas.width * this.inputCanvas.height * 7) / 9068000\r\n    },\r\n    getRealPosition(offsetX, offsetY) {\r\n      let realX =\r\n        (offsetX * this.inputCanvas.width) / this.inputCanvas.offsetWidth\r\n      let realY =\r\n        (offsetY * this.inputCanvas.height) / this.inputCanvas.offsetHeight\r\n\r\n      return { x: realX, y: realY }\r\n    },\r\n    /**处理输入图层组的MouseDown事件 */\r\n    inputCanvasGroupMouseDownHandler(e) {\r\n      this.dragHelper.lastX = e.clientX\r\n      this.dragHelper.lastY = e.clientY\r\n      this.dragHelper.mousedown = true\r\n      this.dragHelper.mouseButton = e.button\r\n      this.dragHelper.mousedownTime = new Date()\r\n    },\r\n    /**处理输入图层组的MouseUp事件 */\r\n    inputCanvasGroupMouseUpHandler(e) {\r\n      if (\r\n        new Date() - this.dragHelper.mousedownTime < 100 &&\r\n        this.dragHelper.mouseButton == e.button\r\n      ) {\r\n        // left click\r\n        if (this.dragHelper.mouseButton == 0) {\r\n          this.colorSelected ? this.addWayPoint(e) : this.pickColor(e)\r\n        }\r\n        // right click\r\n        if (this.dragHelper.mouseButton == 2) {\r\n          this.popWayPoint()\r\n        }\r\n      }\r\n\r\n      this.dragHelper.mousedown = false\r\n    },\r\n    /**处理输入图层组的MouseMove事件 */\r\n    inputCanvasGroupMouseMoveHandler(e) {\r\n      if (!this.dragHelper.mousedown) {\r\n        return\r\n      }\r\n\r\n      this.moveInputCanvasGroup(\r\n        e.clientX - this.dragHelper.lastX,\r\n        e.clientY - this.dragHelper.lastY\r\n      )\r\n      this.dragHelper.lastX = e.clientX\r\n      this.dragHelper.lastY = e.clientY\r\n    },\r\n    inputCanvasGroupMouseWheelHandler(e) {\r\n      if (e.deltaY < 0) {\r\n        this.scaleInputCanvasGroup(1.1, e.offsetX, e.offsetY)\r\n      } else {\r\n        this.scaleInputCanvasGroup(0.9, e.offsetX, e.offsetY)\r\n      }\r\n    },\r\n    inputCanvasGroupMouseLeaveHandler() {\r\n      this.dragHelper.mousedown = false\r\n    },\r\n    scaleInputCanvasGroup(deltaFactor, offsetX, offsetY) {\r\n      if (this.scaleFactor * deltaFactor < 0.101) {\r\n        return\r\n      }\r\n\r\n      let oldFactor = this.scaleFactor\r\n      this.scaleFactor *= deltaFactor\r\n\r\n      this.moveInputCanvasGroup(\r\n        offsetX * (oldFactor - this.scaleFactor),\r\n        offsetY * (oldFactor - this.scaleFactor)\r\n      )\r\n    },\r\n    moveInputCanvasGroup(deltaX, deltaY) {\r\n      // 左侧画面外的部分不能超过当前图片大小的90%\r\n      let inLeftBound =\r\n        this.translateX + deltaX >\r\n        -this.inputCanvas.offsetWidth * this.scaleFactor * 0.9\r\n      // 右侧画面外的部分不能超过当前图片大小的90%\r\n      let inRightBound =\r\n        this.translateX + deltaX <\r\n        this.inputCanvas.offsetWidth -\r\n          this.inputCanvas.offsetWidth * this.scaleFactor * 0.1\r\n      // 上侧画面外的部分不能超过当前图片大小的90%\r\n      let inUpBound =\r\n        this.translateY + deltaY >\r\n        -this.inputCanvas.offsetHeight * this.scaleFactor * 0.9\r\n      // 下侧画面外的部分不能超过当前图片大小的90%\r\n      let inDownBound =\r\n        this.translateY + deltaY <\r\n        this.inputCanvas.offsetHeight -\r\n          this.inputCanvas.offsetHeight * this.scaleFactor * 0.1\r\n\r\n      if (inLeftBound && inRightBound && inUpBound && inDownBound) {\r\n        this.translateX += deltaX\r\n        this.translateY += deltaY\r\n      }\r\n    },\r\n    /**选取颜色作为透明区域参考色 */\r\n    pickColor(e) {\r\n      let { x, y } = this.getRealPosition(e.offsetX, e.offsetY)\r\n      console.log(\r\n        'pick color(' +\r\n          x +\r\n          ',' +\r\n          y +\r\n          ') from (' +\r\n          this.inputCanvas.width +\r\n          ',' +\r\n          this.inputCanvas.height +\r\n          ')'\r\n      )\r\n      let raw_colorRGB = this.inputCanvas\r\n        .getContext('2d')\r\n        .getImageData(x, y, 1, 1).data\r\n      this.colorRGB = {\r\n        r: raw_colorRGB[0],\r\n        g: raw_colorRGB[1],\r\n        b: raw_colorRGB[2],\r\n      }\r\n      this.colorSelected = true\r\n    },\r\n    /**格式化颜色，用于显示被选取的透明区域参考色，以及被选取的背景色 */\r\n    formatColor(raw_color) {\r\n      return (\r\n        '#' +\r\n        ((1 << 24) + (raw_color.r << 16) + (raw_color.g << 8) + raw_color.b)\r\n          .toString(16)\r\n          .substr(1)\r\n      )\r\n    },\r\n    /**切换使用高级背景 */\r\n    toggleAdvanceChangeBackground() {\r\n      this.advanceChangeBackground = !this.advanceChangeBackground\r\n    },\r\n    /**添加处理区域标记点 */\r\n    addWayPoint(e) {\r\n      let { x, y } = this.getRealPosition(e.offsetX, e.offsetY)\r\n      console.log('add point(' + x + ',' + y + ')')\r\n      this.marker.addPoint(x, y)\r\n    },\r\n    /**弹出最后添加的处理区域标记点 */\r\n    popWayPoint() {\r\n      console.log('pop point')\r\n      this.marker.popPoint()\r\n    },\r\n    addMarkedAreaMask() {\r\n      this.maskManager.orMask(this.marker.collectMask())\r\n      this.marker.reset()\r\n    },\r\n    intersectMarkedAreaMask() {\r\n      this.maskManager.andMask(this.marker.collectMask())\r\n      this.marker.reset()\r\n    },\r\n    exceptMarkedAreaMask() {\r\n      this.maskManager.exceptMask(this.marker.collectMask())\r\n      this.marker.reset()\r\n    },\r\n    gaussianFilterNoiseReductionCopy() {\r\n      let originImageData = this.inputCanvas\r\n        .getContext('2d')\r\n        .getImageData(0, 0, this.inputCanvas.width, this.inputCanvas.height)\r\n\r\n      let copy = ImageToolKit.clampTo254Copy(originImageData)\r\n\r\n      copy = ImageToolKit.gaussianFilterNoiseReductionCopy(copy, 2)\r\n\r\n      this.inputCanvas.getContext('2d').putImageData(copy, 0, 0)\r\n    },\r\n    /**异步处理 */\r\n    processImageAsync() {\r\n      setTimeout(() => {\r\n        this.addMarkedAreaMask()\r\n        if (this.maskManager.isMarked()) {\r\n          this.processImageUnderMask()\r\n        } else {\r\n          this.processWholeImage()\r\n        }\r\n      }, 100)\r\n      this.isImageProcessing = true\r\n      this.$nextTick()\r\n      console.log('async')\r\n    },\r\n    processWholeImage() {\r\n      this.outputCanvas.width = this.inputCanvas.width\r\n      this.outputCanvas.height = this.inputCanvas.height\r\n\r\n      let imageInData = this.inputCanvas\r\n        .getContext('2d')\r\n        .getImageData(0, 0, this.inputCanvas.width, this.inputCanvas.height)\r\n      let imageOutData = this.outputCanvas\r\n        .getContext('2d')\r\n        .getImageData(0, 0, this.outputCanvas.width, this.outputCanvas.height)\r\n      let backgroundColor = [this.colorRGB.r, this.colorRGB.g, this.colorRGB.b]\r\n\r\n      console.log(imageOutData.width + ' ' + imageOutData.height)\r\n\r\n      for (let i = 0; i < imageInData.height; i++) {\r\n        for (let j = 0; j < imageInData.width; j++) {\r\n          ImageProcessor.processPixel(\r\n            imageInData,\r\n            imageOutData,\r\n            i,\r\n            j,\r\n            backgroundColor\r\n          )\r\n        }\r\n        console.log(i + '/' + imageInData.height)\r\n      }\r\n      this.outputCanvas.getContext('2d').putImageData(imageOutData, 0, 0)\r\n      this.imageOut = this.outputCanvas.toDataURL()\r\n      this.isImageProcessing = false\r\n      this.isImageProcessed = true\r\n    },\r\n\r\n    processImageUnderMask() {\r\n      this.outputCanvas.width = this.inputCanvas.width\r\n      this.outputCanvas.height = this.inputCanvas.height\r\n\r\n      let imageInData = this.inputCanvas\r\n        .getContext('2d')\r\n        .getImageData(0, 0, this.inputCanvas.width, this.inputCanvas.height)\r\n      let imageOutData = this.outputCanvas\r\n        .getContext('2d')\r\n        .getImageData(0, 0, this.outputCanvas.width, this.outputCanvas.height)\r\n      let backgroundColor = [this.colorRGB.r, this.colorRGB.g, this.colorRGB.b]\r\n\r\n      console.log(imageOutData.width + ' ' + imageOutData.height)\r\n\r\n      for (let i = 0; i < imageInData.height; i++) {\r\n        for (let j = 0; j < imageInData.width; j++) {\r\n          // 坐标的x是列序号，y是行序号，因此这里需要倒过来\r\n          if (this.maskManager.isPointSelected(j, i)) {\r\n            ImageProcessor.processPixel(\r\n              imageInData,\r\n              imageOutData,\r\n              i,\r\n              j,\r\n              backgroundColor\r\n            )\r\n          } else {\r\n            ImageToolKit.copyPixel(imageInData, imageOutData, i, j)\r\n          }\r\n        }\r\n        console.log(i + '/' + imageInData.height)\r\n      }\r\n      this.outputCanvas.getContext('2d').putImageData(imageOutData, 0, 0)\r\n      this.imageOut = this.outputCanvas.toDataURL()\r\n      this.isImageProcessing = false\r\n      this.isImageProcessed = true\r\n    },\r\n  },\r\n}\r\n</script>\r\n\r\n<style>\r\n.full-width {\r\n  width: 100%;\r\n}\r\n.margin-auto {\r\n  margin: auto;\r\n}\r\n.canvas-group-wrapper {\r\n  position: relative;\r\n  overflow: hidden;\r\n  /* background-image: linear-gradient(to bottom, #66ccff, #ee82ee); */\r\n}\r\n.center-background {\r\n  background-position-x: center;\r\n  background-position-y: center;\r\n  background-size: cover;\r\n}\r\n.fixed-right-bottom {\r\n  position: fixed !important;\r\n  bottom: 1em;\r\n  right: 1em;\r\n}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=2a977060&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VAppBarNavIcon } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VColorPicker } from 'vuetify/lib/components/VColorPicker';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VFileInput } from 'vuetify/lib/components/VFileInput';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VList } from 'vuetify/lib/components/VList';\nimport { VListItem } from 'vuetify/lib/components/VList';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\ninstallComponents(component, {VApp,VAppBar,VAppBarNavIcon,VBtn,VCard,VCardActions,VCardText,VCardTitle,VColorPicker,VContainer,VDialog,VFileInput,VIcon,VList,VListItem,VMain,VNavigationDrawer,VProgressLinear,VRow,VSelect,VSlider,VSpacer})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport vuetify from './plugins/vuetify';\r\n\r\nVue.config.productionTip = false\r\n\r\nnew Vue({\r\n  vuetify,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","module.exports = __webpack_public_path__ + \"img/绿渐变.9b0016e7.jpeg\";","module.exports = __webpack_public_path__ + \"img/logo.63a7d78d.svg\";","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";","module.exports = __webpack_public_path__ + \"img/红渐变.d918eefc.jpeg\";"],"sourceRoot":""}